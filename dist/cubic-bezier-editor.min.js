parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"dgGA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.prefix=exports.$$=exports.$=void 0;const e=(e,t)=>(t||document).querySelector(e),t=(e,t)=>(t||document).querySelectorAll(e);exports.$$=t,exports.$=e;const r=["","-moz-","-ms-","-o-","-webkit-"],o=(e=>{for(var t=r.length;t--;){var o=r[t];if(e.setProperty(o+"transition","1s",null),e.cssText)return o}return null})(document.createElement("a").style);exports.prefix=o;
},{}],"q8bl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BezierCanvas=exports.CubicBezier=void 0;var e=require("./enviroment");function t(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class i{constructor(e){t(this,"prettifyNumber",e=>(Math.round(100*e)/100+"").replace(/^0\./,".")),this.isCoordinates(e),this.coordinates=this.decodeCoordinates(e),this.coordinates=this.coordinates.map(e=>+e),this.coordinates.toString=(()=>this.coordinates.map(this.prettifyNumber)+"")}isCoordinates(e){if(!e)throw"No offsets were defined"}decodeCoordinates(e){return"string"==typeof e?(0===e.indexOf("#")&&(e=e.slice(1)),e.split(",")):e}get P1(){return this.coordinates.slice(0,2)}get P2(){return this.coordinates.slice(2)}get clipped(){let e=this.coordinates.slice();for(let t=e.length;t--;)e[t]=Math.max(0,Math.min(e[t],1));return new this(e)}get inRange(){let e=this.coordinates;return Math.abs(e[1]-.5)<=.5&&Math.abs(e[3]-.5)<=.5}toString(){return"cubic-bezier("+this.coordinates+")"}applyStyle(t){t.style.setProperty(e.prefix+"transition-timing-function",this,null)}}exports.CubicBezier=i;class s{constructor(e,t,i){this.canvas=e,this.bezier=t,this.padding=this.getPadding(i);const s=this.canvas.getContext("2d"),o=this.padding;s.scale(e.width*(1-o[1]-o[3]),-e.height*(1-o[0]-o[2])),s.translate(o[3]/(1-o[1]-o[3]),-1-o[0]/(1-o[0]-o[2]))}get offsets(){const e=this.padding,t=this.canvas.width,i=this.canvas.height;return[{left:t*(this.bezier.coordinates[0]*(1-e[3]-e[1])-e[3])+"px",top:i*(1-this.bezier.coordinates[1]*(1-e[0]-e[2])-e[0])+"px"},{left:t*(this.bezier.coordinates[2]*(1-e[3]-e[1])-e[3])+"px",top:i*(1-this.bezier.coordinates[3]*(1-e[0]-e[2])-e[0])+"px"}]}offsetsToCoordinates(e){let t=this.padding;const i=this.canvas.width,s=this.canvas.height;return t=t.map((e,t)=>e*(t%2?i:s)),[(parseInt(e.style.left)-t[3])/(i+t[1]+t[3]),(s-parseInt(e.style.top)-t[2])/(s-t[0]-t[2])]}plot(e){const t=this.bezier.coordinates,i=this.canvas.getContext("2d"),s={handleColor:"rgba(0,0,0,.6)",handleThickness:.008,bezierColor:"black",bezierThickness:.02};e||(e={});for(let r in s)r in e||(e[r]=s[r]);i.clearRect(-.5,-.5,2,2),i.beginPath(),i.fillStyle=e.handleColor,i.lineWidth=e.handleThickness,i.strokeStyle=e.handleColor,i.moveTo(0,0),i.lineTo(t[0],t[1]),i.moveTo(1,1),i.lineTo(t[2],t[3]),i.stroke(),i.closePath();const o=1.5*e.handleThickness;i.beginPath(),i.arc(t[0],t[1],o,0,2*Math.PI,!1),i.closePath(),i.fill(),i.beginPath(),i.arc(t[2],t[3],o,0,2*Math.PI,!1),i.closePath(),i.fill(),i.beginPath(),i.lineWidth=e.bezierThickness,i.strokeStyle=e.bezierColor,i.moveTo(0,0),i.bezierCurveTo(t[0],t[1],t[2],t[3],1,1),i.stroke(),i.closePath()}getPadding(e){let t="number"==typeof e?[e]:e;return 1===t.length&&(t[1]=t[0]),2===t.length&&(t[2]=t[0]),3===t.length&&(t[3]=t[1]),t}}exports.BezierCanvas=s;
},{"./enviroment":"dgGA"}],"rUsD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./enviroment"),t=require("./cubic-bezier"),s=(s,i,l,n,r={})=>{const o={curves:{},render(){const i=(0,e.$$)("a",s);for(let e=i.length;e--;)s.removeChild(i[e]);for(let e in this.curves)try{this.add(e,new t.CubicBezier(this.curves[e]))}catch(l){console.error(l)}},add(i,l){const n=document.createElement("canvas");n.width=r.width||30,n.height=r.height||30;const a=document.createElement("a");a.title=i,a.bezier=l,a.style.width=r.width?r.width+5+"px":"35px",a.bezierCanvas=new t.BezierCanvas(n,l,.15),l.applyStyle||console.log(l),l.applyStyle(a),s.insertBefore(a,(0,e.$)("footer",s)),a.appendChild(n);const c=document.createElement("span");c.textContent=i,c.title=i,a.appendChild(c);const d=document.createElement("button");d.innerHTML="Ã—",d.title="Remove from library",d.classList="curve-button",d.addEventListener("click",function(e){return e.stopPropagation(),o.deleteItem(this.parentNode),!1}),a.appendChild(d),a.bezierCanvas.plot(this.thumbnailStyle),a.onclick=this.selectThumbnail},selectThumbnail(){const t=(0,e.$)(".selected",this.parentNode);t&&(t.classList.remove("selected"),t.bezierCanvas.plot(this.thumbnailStyle)),this.classList.add("selected"),i.bezier=this.bezier;const s=i.offsets;l.style.left=s[0].left,l.style.top=s[0].top,n.style.left=s[1].left,n.style.top=s[1].top,l.update()},deleteItem(t){const i=(0,e.$)("span",t).textContent;delete this.curves[i],this.save(),s.removeChild(t),t.classList.contains("selected")&&(0,e.$)("a:first-of-type",s).onclick()},save(e){localStorage.curves=JSON.stringify(e||this.curves)},thumbnailStyle:{handleColor:"rgba(0,0,0,.3)",handleThickness:.018,bezierThickness:.032},thumbnailStyleSelected:{handleColor:"rgba(255,255,255,.6)",bezierColor:"white",handleThickness:.018,bezierThickness:.032}};return o};exports.default=s;
},{"./enviroment":"dgGA","./cubic-bezier":"q8bl"}],"E8WP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.predefined=void 0;const e={ease:".25,.1,.25,1",linear:"0,0,1,1","ease-in":".42,0,1,1","ease-out":"0,0,.58,1","ease-in-out":".42,0,.58,1"};exports.predefined=e;
},{}],"iMte":[function(require,module,exports) {

},{}],"Focm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cubicBezier=void 0;var e=o(require("./bezier-library")),t=require("./enviroment"),i=require("./cubic-bezier"),n=require("./consts"),s=o(require("./style.css"));function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}function a(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?r(Object(i),!0).forEach(function(t){l(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}function l(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const u=(s={})=>{const o=a(a({},{preview:!0,input:!0,width:150,arrowKeyControls:!0,onClick:!0}),s),r={template:`<section class="curve-library" style="height:${2*o.width}px;margin-left:${o.width+30}px;"></section>\n                    ${o.preview?'<div class="curve-preview-ball"></div>':""}\n                    <div class="coordinate-plane">\n                        <span class="control-point P0" data-point="P0"></span>\n                        <button class="control-point curve-button P1" style="left:50px; top: 250px;" data-point="P1"></button>\n                        <button class="control-point curve-button P2" style="left:250px; top: 250px;" data-point="P2"></button>\n                        <span class="curve-control-point P3" data-point="P3"></span>\n                        <canvas height="${2*o.width}" width="${o.width}" class="curve-canvas"></canvas>\n                        ${o.input?'<input type="text" id="curve-input">':""}\n                        <button class="curve-save">Save</button>\n                    </div>`,onMouseDown(){const e=this;document.onmousemove=function(t){let i=t.pageX,n=t.pageY;const s=r.curveBoundingBox.left,o=r.curveBoundingBox.top;0===i&&0==n||(i=Math.min(Math.max(s,i),s+r.curveBoundingBox.width),n=Math.min(Math.max(o,n),o+2*r.curveBoundingBox.width),e.style.left=i-s+"px",e.style.top=n-o+"px",r.update())},document.onmouseup=function(){e.focus(),document.onmousemove=document.onmouseup=null}},onKeyDown(e){const t=e.keyCode;if(t>=37&&t<=40){e.preventDefault();const i=parseInt(this.style.left),n=parseInt(this.style.top),s=r.curveBoundingBox.left,o=r.curveBoundingBox.top,a=3*(e.shiftKey?10:1);switch(t){case 37:this.style.left=Math.min(Math.max(s,i-a),s+r.curveBoundingBox.width)+"px";break;case 38:this.style.top=Math.min(Math.max(o,n-a),o+2*r.curveBoundingBox.width)+"px";break;case 39:this.style.left=Math.min(Math.max(s,i+a),s+r.curveBoundingBox.width)+"px";break;case 40:this.style.top=Math.min(Math.max(o,n+a),o+2*r.curveBoundingBox.width)+"px"}return r.update(),!1}},onClick(e){const t=r.curveBoundingBox.left,i=r.curveBoundingBox.top,n=e.pageX-t,s=e.pageY-i,o=a(n,s,parseInt(r.P1.style.left),parseInt(r.P1.style.top))<a(n,s,parseInt(r.P2.style.left),parseInt(r.P2.style.top))?r.P1:r.P2;function a(e,t,i,n){return Math.sqrt(Math.pow(e-i,2)+Math.pow(t-n,2))}o.style.left=n+"px",o.style.top=s+"px",r.update()},onMouseMove(e){const t=r.curveBoundingBox.left,i=r.curveBoundingBox.top,n=r.curveBoundingBox.height,s=e.pageX-t,o=e.pageY-i;this.parentNode.setAttribute("data-time",Math.round(100*s/r.curveBoundingBox.width)),this.parentNode.setAttribute("data-progression",Math.round(100*(3*n/4-o)/(.5*n)))},onSave(){const e=this.bezierCanvas.bezier.coordinates+"";this.lib.add(e,this.bezierCanvas.bezier),this.lib.curves[e]=e,this.lib.save()},onChange(){r.checkCoordinates(this.value.split(","))&&(r.update(this.value),r.P1.style.left=r.bezierCanvas.offsets[0].left,r.P1.style.top=r.bezierCanvas.offsets[0].top,r.P2.style.left=r.bezierCanvas.offsets[1].left,r.P2.style.top=r.bezierCanvas.offsets[1].top)},runPreview(){"translateX(0px)"!==this.ball.style.transform?this.ball.style.transform="translateX(0px)":this.ball.style.transform=`translateX(${o.width-10}px)`},update(e=""){this.bezierCanvas.bezier=new i.CubicBezier(e||this.bezierCanvas.offsetsToCoordinates(this.P1).concat(this.bezierCanvas.offsetsToCoordinates(this.P2))),this.bezierCanvas.plot({handleColor:o.handleColor||"rgba(0,255,0,.6)",bezierColor:o.bezierColor||"#aaa4aa",handleThickness:o.handleThickness||.01,bezierThickness:o.bezierThickness||.015}),this.input&&(this.input.value=this.getValueString(this.bezierCanvas.bezier)),this.ball.style.setProperty(t.prefix+"transition-timing-function",this.getValueCss(this.bezierCanvas.bezier),null)},updateDelayed(){history.pushState&&history.pushState(null,null,this.bezierCanvas.bezier.coordinates)},getValueArrayNum:e=>e.coordinates.toString().split(",").map(e=>parseFloat(e)),getValueArray:e=>e.coordinates.toString().split(","),getValueString:e=>e.coordinates.toString(),getValueCss:e=>"cubic-bezier("+e.coordinates.toString()+")",getDuration(){return isNaN(this.duration=Math.round(10*this.duration)/10)?null:this.duration},checkCoordinates(e){if(4!==e.length)return!1;let t=!0;return e.forEach((e,i)=>{isNaN(e)||!(i%2)&&(e<0||e>1)?(console.log("Wrong coordinate at ["+i+"] ("+e+")"),t=!1):(isNaN(e)||i%2&&(e<-.5||e>1.5))&&(console.log("Wrong coordinate at ["+i+"] ("+e+")"),t=!1)}),t},init(){const s=document.createElement("div");s.classList.add("curve-display"),s.innerHTML=this.template,s.style.width=o.width+90+"px",o.appendTo&&"string"==typeof o.appendChild?(0,t.$)(o.appendTo).appendChild(s):o.appendTo&&o.appendTo.appendChild(s)||document.body.appendChild(s),this.input=(0,t.$)("#curve-input",s),this.curve=(0,t.$)(".curve-canvas",s),this.P1=(0,t.$)(".P1",s),this.P2=(0,t.$)(".P2",s),this.library=(0,t.$)(".curve-library",s),this.save=(0,t.$)(".curve-save",s),this.duration=o.duration||1.5,this.ball=(0,t.$)(".curve-preview-ball",s),this.ball.style.setProperty(t.prefix+"transition-duration",this.getDuration()+"s",null),this.bezierCanvas=new i.BezierCanvas(this.curve,null,o.padding||[.25,0]),this.P1.update=(()=>this.update()),this.lib=(0,e.default)(this.library,this.bezierCanvas,this.P1,this.P2,o.bezierLibrary),this.ctx=this.curve.getContext("2d"),this.curveBoundingBox=this.curve.getBoundingClientRect(),o.clearStorage&&localStorage.curves&&localStorage.removeItem("curves"),!localStorage.curves&&this.lib.save(o.predefined||n.predefined),this.lib.curves=JSON.parse(localStorage.curves),this.lib.render(),o.default&&this.checkCoordinates(o.default.split(","))||(o.default=!1),this.bezierCanvas.bezier=new i.CubicBezier(o.default||".25, .1, .25, 1"),this.P1.style.left=this.bezierCanvas.offsets[0].left,this.P1.style.top=this.bezierCanvas.offsets[0].top,this.P2.style.left=this.bezierCanvas.offsets[1].left,this.P2.style.top=this.bezierCanvas.offsets[1].top,this.update(),this.P1.onmousedown=this.P2.onmousedown=this.onMouseDown,this.P1.onkeydown=this.P2.onkeydown=o.arrowKeyControls?this.onKeyDown:null,this.curve.onclick=o.onClick?this.onClick:null,this.curve.onmousemove=this.onMouseMove,this.input&&(this.input.onchange=this.onChange),this.ball.onclick=(()=>this.runPreview()),this.save.onclick=(e=>this.onSave(e))}};return r};exports.cubicBezier=u,window.cubicBezier=u;
},{"./bezier-library":"rUsD","./enviroment":"dgGA","./cubic-bezier":"q8bl","./consts":"E8WP","./style.css":"iMte"}]},{},["Focm"], null)
//# sourceMappingURL=/cubic-bezier-editor.min.js.map